-- Services
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local StarterGui = game:GetService("StarterGui")
local ContextActionService = game:GetService("ContextActionService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Cleanup
if playerGui:FindFirstChild("FakeBanGui") then
	playerGui.FakeBanGui:Destroy()
end
if Lighting:FindFirstChild("FakeBanBlur") then
	Lighting.FakeBanBlur:Destroy()
end

-- Blur background (optional)
local blur = Instance.new("BlurEffect")
blur.Name = "FakeBanBlur"
blur.Size = 100
blur.Parent = Lighting

-- ScreenGui
local gui = Instance.new("ScreenGui", playerGui)
gui.Name = "FakeBanGui"
gui.IgnoreGuiInset = true
gui.DisplayOrder = 999
gui.ResetOnSpawn = false

-- Blackout Layer
local blackout = Instance.new("Frame", gui)
blackout.Size = UDim2.new(1, 0, 1, 0)
blackout.Position = UDim2.new(0, 0, 0, 0)
blackout.BackgroundColor3 = Color3.new(0, 0, 0)
blackout.BackgroundTransparency = 0 -- Fully black
blackout.ZIndex = 0

-- Input blocker (invisible overlay that absorbs all clicks)
local inputBlocker = Instance.new("TextButton", gui)
inputBlocker.Size = UDim2.new(1, 0, 1, 0)
inputBlocker.Position = UDim2.new(0, 0, 0, 0)
inputBlocker.BackgroundTransparency = 1
inputBlocker.Text = ""
inputBlocker.ZIndex = 999
inputBlocker.AutoButtonColor = false

-- Main window
local container = Instance.new("Frame", gui)
container.Size = UDim2.new(0.4, 0, 0.45, 0)
container.Position = UDim2.new(0.3, 0, 0.275, 0)
container.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
container.ZIndex = 1000
Instance.new("UICorner", container).CornerRadius = UDim.new(0, 12)

-- Shadow glow
local shadow = Instance.new("ImageLabel", container)
shadow.Size = UDim2.new(1, 20, 1, 20)
shadow.Position = UDim2.new(0, -10, 0, -10)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://1316045217"
shadow.ImageTransparency = 0.6
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(10, 10, 118, 118)
shadow.ZIndex = 999

-- Title
local title = Instance.new("TextLabel", container)
title.Text = "Disconnected"
title.Size = UDim2.new(1, 0, 0.15, 0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.fromRGB(255, 80, 80)
title.TextScaled = true
title.ZIndex = 1001

-- Message
local message = Instance.new("TextLabel", container)
message.Text = "‚ö†Ô∏è Warning: This script is unstable on Delta executor.\n\nYou have been removed from the experience for using Delta.\n\nUse one of the trusted executors listed below for better compatibility and fewer issues.\n\n(Error Code: 267)"
message.Size = UDim2.new(1, -30, 0.45, 0)
message.Position = UDim2.new(0, 15, 0.17, 0)
message.BackgroundTransparency = 1
message.TextColor3 = Color3.fromRGB(230, 230, 230)
message.Font = Enum.Font.Gotham
message.TextScaled = true
message.TextWrapped = true
message.TextYAlignment = Enum.TextYAlignment.Top
message.ZIndex = 1001

-- Leave button
local leaveBtn = Instance.new("TextButton", container)
leaveBtn.Text = "Leave"
leaveBtn.Size = UDim2.new(0.4, 0, 0.15, 0)
leaveBtn.Position = UDim2.new(0.3, 0, 0.68, 0)
leaveBtn.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
leaveBtn.TextColor3 = Color3.new(1, 1, 1)
leaveBtn.Font = Enum.Font.GothamBold
leaveBtn.TextScaled = true
leaveBtn.ZIndex = 1001
Instance.new("UICorner", leaveBtn).CornerRadius = UDim.new(0, 8)

-- Trusted button
local trustedBtn = Instance.new("TextButton", container)
trustedBtn.Text = "See Trusted Executors"
trustedBtn.Size = UDim2.new(0.6, 0, 0.12, 0)
trustedBtn.Position = UDim2.new(0.2, 0, 0.85, 0)
trustedBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 255)
trustedBtn.TextColor3 = Color3.new(1, 1, 1)
trustedBtn.Font = Enum.Font.GothamMedium
trustedBtn.TextScaled = true
trustedBtn.ZIndex = 1001
Instance.new("UICorner", trustedBtn).CornerRadius = UDim.new(0, 8)

-- Trusted Executors Frame
local execFrame = Instance.new("Frame", gui)
execFrame.Visible = false
execFrame.Size = container.Size
execFrame.Position = container.Position
execFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
execFrame.ZIndex = 1002
Instance.new("UICorner", execFrame).CornerRadius = UDim.new(0, 12)

local execTitle = Instance.new("TextLabel", execFrame)
execTitle.Text = "Trusted Executors"
execTitle.Size = UDim2.new(1, 0, 0.15, 0)
execTitle.BackgroundTransparency = 1
execTitle.Font = Enum.Font.GothamBold
execTitle.TextColor3 = Color3.fromRGB(0, 255, 255)
execTitle.TextScaled = true
execTitle.ZIndex = 1003

local executors = {
	{"Arceus X", "https://arceusx.com/"},
	{"Codex", "https://codex.lol/"},
	{"KRNL", "https://krnl.cat/"},
	{"Fluxus", "https://fluxus-team.net/"}
}

for i, info in ipairs(executors) do
	local name, url = unpack(info)
	local b = Instance.new("TextButton", execFrame)
	b.Text = name
	b.Size = UDim2.new(0.8, 0, 0.12, 0)
	b.Position = UDim2.new(0.1, 0, 0.15 + (i * 0.13), 0)
	b.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	b.TextColor3 = Color3.fromRGB(255, 255, 255)
	b.Font = Enum.Font.Gotham
	b.TextScaled = true
	b.ZIndex = 1003
	Instance.new("UICorner", b).CornerRadius = UDim.new(0, 6)

	b.MouseButton1Click:Connect(function()
		local executorName = identifyexecutor and identifyexecutor() or "Unknown"
		local notif = Instance.new("Frame", gui)
		notif.Size = UDim2.new(0.35, 0, 0.16, 0)
		notif.Position = UDim2.new(0.325, 0, 0.42, 0)
		notif.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
		notif.ZIndex = 1004

		local corner = Instance.new("UICorner", notif)
		corner.CornerRadius = UDim.new(0, 10)

		local glow = Instance.new("UIStroke", notif)
		glow.Color = Color3.fromRGB(0, 255, 127)
		glow.Thickness = 2
		glow.Transparency = 0.25

		if executorName ~= "Delta" and setclipboard then
			setclipboard(url)

			local msg = Instance.new("TextLabel", notif)
			msg.Size = UDim2.new(1, -20, 1, -20)
			msg.Position = UDim2.new(0, 10, 0, 10)
			msg.BackgroundTransparency = 1
			msg.TextColor3 = Color3.fromRGB(0, 255, 127)
			msg.Text = "‚úÖ Link copied!\nPaste it on your browser."
			msg.Font = Enum.Font.GothamBold
			msg.TextScaled = true
			msg.TextWrapped = true
			msg.ZIndex = 1005
		else
			local infoText = Instance.new("TextLabel", notif)
			infoText.Text = "üîó Copy this manually:"
			infoText.Size = UDim2.new(1, 0, 0.4, 0)
			infoText.Position = UDim2.new(0, 0, 0, 0)
			infoText.BackgroundTransparency = 1
			infoText.TextColor3 = Color3.fromRGB(255, 255, 255)
			infoText.Font = Enum.Font.Gotham
			infoText.TextScaled = true
			infoText.ZIndex = 1005

			local linkBox = Instance.new("TextBox", notif)
			linkBox.Text = url
			linkBox.Size = UDim2.new(0.9, 0, 0.4, 0)
			linkBox.Position = UDim2.new(0.05, 0, 0.5, 0)
			linkBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
			linkBox.TextColor3 = Color3.fromRGB(0, 255, 127)
			linkBox.Font = Enum.Font.Gotham
			linkBox.TextScaled = true
			linkBox.ClearTextOnFocus = false
			linkBox.ZIndex = 1005
			Instance.new("UICorner", linkBox).CornerRadius = UDim.new(0, 6)
		end

		-- Fade out after 5 seconds
		task.delay(5, function()
			for i = 0, 1, 0.05 do
				notif.BackgroundTransparency = i
				glow.Transparency = i
				for _, obj in ipairs(notif:GetChildren()) do
					if obj:IsA("TextLabel") or obj:IsA("TextBox") then
						obj.TextTransparency = i
					end
				end
				task.wait(0.03)
			end
			notif:Destroy()
		end)
	end)
end

-- Back Button (now correctly placed AFTER the loop)
local backBtn = Instance.new("TextButton", execFrame)
backBtn.Text = "Back"
backBtn.Size = UDim2.new(0.3, 0, 0.12, 0)
backBtn.Position = UDim2.new(0.35, 0, 0.85, 0)
backBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
backBtn.TextColor3 = Color3.new(1, 1, 1)
backBtn.Font = Enum.Font.GothamBold
backBtn.TextScaled = true
backBtn.ZIndex = 1003
Instance.new("UICorner", backBtn).CornerRadius = UDim.new(0, 8)

-- Button logic
leaveBtn.MouseButton1Click:Connect(function()
	if blur then blur:Destroy() end
	player:Kick("You have left the game.")
end)

trustedBtn.MouseButton1Click:Connect(function()
	container.Visible = false
	execFrame.Visible = true
end)

backBtn.MouseButton1Click:Connect(function()
	execFrame.Visible = false
	container.Visible = true
end)

-- FULL Input Blocker
local function blockInput(actionName, inputState, inputObj)
	return Enum.ContextActionResult.Sink
end

ContextActionService:BindAction("BlockAllInputs", blockInput, false, unpack(Enum.PlayerActions:GetEnumItems()))

UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if not gameProcessed then
		blockInput("BlockAllInputs", nil, input)
	end
end)
