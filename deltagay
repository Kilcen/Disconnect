-- Whitelisted executors
local allowedExecutors = {
    ["Cryptic"] = true,
    ["Trigon"] = true,
    ["Trigon Evo"] = true,
    ["Evon"] = true,
    ["VegaX"] = true,
    ["Vega X"] = true
}

-- Detect current executor
local currentExecutor = identifyexecutor and identifyexecutor() or "Unknown"

-- If executor is allowed, stop here (no fake ban)
if allowedExecutors[currentExecutor] then
    return
end

-- Services
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local StarterGui = game:GetService("StarterGui")
local ContextActionService = game:GetService("ContextActionService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Cleanup
if playerGui:FindFirstChild("FakeBanGui") then
	playerGui.FakeBanGui:Destroy()
end
if Lighting:FindFirstChild("FakeBanBlur") then
	Lighting.FakeBanBlur:Destroy()
end

-- Blur background
local blur = Instance.new("BlurEffect")
blur.Name = "FakeBanBlur"
blur.Size = 100
blur.Parent = Lighting

-- ScreenGui
local gui = Instance.new("ScreenGui", playerGui)
gui.Name = "FakeBanGui"
gui.IgnoreGuiInset = true
gui.DisplayOrder = 999
gui.ResetOnSpawn = false

-- Blackout Layer
local blackout = Instance.new("Frame", gui)
blackout.Size = UDim2.new(1, 0, 1, 0)
blackout.Position = UDim2.new(0, 0, 0, 0)
blackout.BackgroundColor3 = Color3.new(0, 0, 0)
blackout.BackgroundTransparency = 0
blackout.ZIndex = 0

-- Input blocker
local inputBlocker = Instance.new("TextButton", gui)
inputBlocker.Size = UDim2.new(1, 0, 1, 0)
inputBlocker.Position = UDim2.new(0, 0, 0, 0)
inputBlocker.BackgroundTransparency = 1
inputBlocker.Text = ""
inputBlocker.ZIndex = 999
inputBlocker.AutoButtonColor = false

-- Main window
local container = Instance.new("Frame", gui)
container.Size = UDim2.new(0.4, 0, 0.45, 0)
container.Position = UDim2.new(0.3, 0, 0.275, 0)
container.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
container.ZIndex = 1000
Instance.new("UICorner", container).CornerRadius = UDim.new(0, 12)

-- Shadow glow
local shadow = Instance.new("ImageLabel", container)
shadow.Size = UDim2.new(1, 20, 1, 20)
shadow.Position = UDim2.new(0, -10, 0, -10)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://1316045217"
shadow.ImageTransparency = 0.6
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(10, 10, 118, 118)
shadow.ZIndex = 999

-- Title
local title = Instance.new("TextLabel", container)
title.Text = "Disconnected"
title.Size = UDim2.new(1, 0, 0.15, 0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.fromRGB(255, 80, 80)
title.TextScaled = true
title.ZIndex = 1001

-- Message
local message = Instance.new("TextLabel", container)
message.Text = "⚠️ Warning: This script is unstable on your executor.\n\nYou have been removed from the experience.\n\nUse one of the trusted executors listed below for better compatibility and fewer issues.\n\n(Error Code: 267)"
message.Size = UDim2.new(1, -30, 0.45, 0)
message.Position = UDim2.new(0, 15, 0.17, 0)
message.BackgroundTransparency = 1
message.TextColor3 = Color3.fromRGB(230, 230, 230)
message.Font = Enum.Font.Gotham
message.TextScaled = true
message.TextWrapped = true
message.TextYAlignment = Enum.TextYAlignment.Top
message.ZIndex = 1001

-- Leave button
local leaveBtn = Instance.new("TextButton", container)
leaveBtn.Text = "Leave"
leaveBtn.Size = UDim2.new(0.4, 0, 0.15, 0)
leaveBtn.Position = UDim2.new(0.3, 0, 0.68, 0)
leaveBtn.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
leaveBtn.TextColor3 = Color3.new(1, 1, 1)
leaveBtn.Font = Enum.Font.GothamBold
leaveBtn.TextScaled = true
leaveBtn.ZIndex = 1001
Instance.new("UICorner", leaveBtn).CornerRadius = UDim.new(0, 8)

-- Trusted button
local trustedBtn = Instance.new("TextButton", container)
trustedBtn.Text = "See Trusted Executors"
trustedBtn.Size = UDim2.new(0.6, 0, 0.12, 0)
trustedBtn.Position = UDim2.new(0.2, 0, 0.85, 0)
trustedBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 255)
trustedBtn.TextColor3 = Color3.new(1, 1, 1)
trustedBtn.Font = Enum.Font.GothamMedium
trustedBtn.TextScaled = true
trustedBtn.ZIndex = 1001
Instance.new("UICorner", trustedBtn).CornerRadius = UDim.new(0, 8)

-- Trusted Executors Frame
local execFrame = Instance.new("Frame", gui)
execFrame.Visible = false
execFrame.Size = container.Size
execFrame.Position = container.Position
execFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
execFrame.ZIndex = 1002
Instance.new("UICorner", execFrame).CornerRadius = UDim.new(0, 12)

local execTitle = Instance.new("TextLabel", execFrame)
execTitle.Text = "Trusted Executors"
execTitle.Size = UDim2.new(1, 0, 0.15, 0)
execTitle.BackgroundTransparency = 1
execTitle.Font = Enum.Font.GothamBold
execTitle.TextColor3 = Color3.fromRGB(0, 255, 255)
execTitle.TextScaled = true
execTitle.ZIndex = 1003

-- Updated list with only your links
local executors = {
    {"Trigon (Best No Key)", "https://www.mediafire.com/file/gufya6dntci0g7u/Trigon_6_8.apk/file"},
    {"VegaX (2nd Best 2days Key)", "https://github.com/1f0yt/community/releases/download/Vegax/Vega.X.apk"},
    {"Cryptic (3rd Best)", "https://www.mediafire.com/file/7rn43l963klk9mj/Cryptic+2.684.688+APK.apk/file"},
    {"Evon (4th Best)", "https://evon.cc/android/#dl"}
}


-- Executor buttons
-- Executor buttons
for i, info in ipairs(executors) do
    local name, url = unpack(info)
    local b = Instance.new("TextButton", execFrame)
    b.Text = name
    b.Size = UDim2.new(0.8, 0, 0.12, 0)
    b.Position = UDim2.new(0.1, 0, 0.15 + (i * 0.13), 0)
    b.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    b.TextColor3 = Color3.fromRGB(255, 255, 255)
    b.Font = Enum.Font.Gotham
    b.TextScaled = true
    b.ZIndex = 1003
    Instance.new("UICorner", b).CornerRadius = UDim.new(0, 6)

    b.MouseButton1Click:Connect(function()
        if setclipboard then
            -- Directly copy
            setclipboard(url)

            -- Small "Copied!" popup
            local copiedMsg = Instance.new("TextLabel", gui)
            copiedMsg.Size = UDim2.new(0.3, 0, 0.08, 0)
            copiedMsg.Position = UDim2.new(0.35, 0, 0.05, 0)
            copiedMsg.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
            copiedMsg.TextColor3 = Color3.fromRGB(0, 255, 127)
            copiedMsg.Font = Enum.Font.GothamBold
            copiedMsg.TextScaled = true
            copiedMsg.Text = "✅ Link copied!"
            copiedMsg.ZIndex = 2000
            Instance.new("UICorner", copiedMsg).CornerRadius = UDim.new(0, 8)

            task.delay(2, function()
                copiedMsg:Destroy()
            end)
        else
            warn("Clipboard function not available.")
        end
    end)
end


-- Back Button
local backBtn = Instance.new("TextButton", execFrame)
backBtn.Text = "Back"
backBtn.Size = UDim2.new(0.3, 0, 0.12, 0)
backBtn.Position = UDim2.new(0.35, 0, 0.85, 0)
backBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
backBtn.TextColor3 = Color3.new(1, 1, 1)
backBtn.Font = Enum.Font.GothamBold
backBtn.TextScaled = true
backBtn.ZIndex = 1003
Instance.new("UICorner", backBtn).CornerRadius = UDim.new(0, 8)

-- Button logic
leaveBtn.MouseButton1Click:Connect(function()
	if blur then blur:Destroy() end
	player:Kick("You have left the game.")
end)

trustedBtn.MouseButton1Click:Connect(function()
	container.Visible = false
	execFrame.Visible = true
end)

backBtn.MouseButton1Click:Connect(function()
	execFrame.Visible = false
	container.Visible = true
end)

-- FULL Input Blocker
local function blockInput(actionName, inputState, inputObj)
	return Enum.ContextActionResult.Sink
end
ContextActionService:BindAction("BlockAllInputs", blockInput, false, unpack(Enum.PlayerActions:GetEnumItems()))

UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if not gameProcessed then
		blockInput("BlockAllInputs", nil, input)
	end
end)
